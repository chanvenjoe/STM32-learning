C51 COMPILER V9.60.0.0   SPEED_DISPLAY                                                     02/23/2022 14:16:59 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE SPEED_DISPLAY
OBJECT MODULE PLACED IN .\Output\Speed_display.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Code\Speed_display.c OPTIMIZE(6,SPEED) BROWSE INCDIR(..\..\Include) DEFI
                    -NE(FOSC_160000) DEBUG OBJECTEXTEND PRINT(.\LST\Speed_display.lst) OBJECT(.\Output\Speed_display.obj)

line level    source

   1          #include "Speed_display.h"
   2          #include "N76E003.h"
   3          #include "SFR_Macro.h"
   4          #include "Function_define.h"
   5          #include "Common.h"
   6          #include "Delay.h"
   7          
   8          #define Bright 2
   9          #define u8 unsigned char
  10          #define u16 unsigned int
  11          
  12          u8 num_arr[] = 
  13          {       
  14                  0x3f,//0
  15                  0x06,//1
  16                  0x5b,//2
  17                  0x4f,//3
  18                  0x66,//4
  19                  0x6d,//5
  20                  0x7d,//6
  21                  0x07,//7
  22                  0x7f,//8
  23                  0x6f //9
  24          }; //uchar == u8 uint == u16
  25          
  26          u8 digit_arr[] =
  27          {
  28                  0xfe,  //1 thous
  29                  0xfd, //2 hund
  30                  0xfb, //3 ten
  31                  0xf7 //4 unit   
  32          };
  33          
  34                  
  35          struct
  36          {
  37                  u8 units;
  38                  u8 tens;
  39                  u8 hundreds;
  40                  u8 thousands;
  41          }speed;
  42          
  43          void GPIO_SetBits(u8 GPIOx,u8 GPIO)
  44          {
  45   1              switch(GPIOx)
  46   1              {
  47   2                      case 0:
  48   2                              P0 = GPIO;
  49   2                              break;
  50   2                      case 1:
  51   2                              P1 = GPIO;
  52   2                              break;
  53   2              }
  54   1              
C51 COMPILER V9.60.0.0   SPEED_DISPLAY                                                     02/23/2022 14:16:59 PAGE 2   

  55   1      }
  56          
  57          void digit_selc_show(u8 bits, u8 num)
  58          {
  59   1              GPIO_SetBits(0,0x00);// num
  60   1              GPIO_SetBits(1,0xff); //bits
  61   1              GPIO_SetBits(1,digit_arr[bits]);
  62   1              GPIO_SetBits(0,num_arr[num]);
  63   1              if(bits==1)
  64   1              {
  65   2                      P07=1;
  66   2              }
  67   1              Timer3_Delay10us(1);
  68   1      }
  69          
  70          void numb_show(u16 n)
  71          {
  72   1              u8 i;
  73   1              //n = n*71/10;//m/h
  74   1              speed.thousands = n/1000%10;
  75   1              speed.hundreds  = n/100%10;
  76   1              speed.tens              = n/10%10;
  77   1              speed.units         = n%10;
  78   1      
  79   1              for(i=0;i<4;i++)
  80   1              {
  81   2                      switch(i)
  82   2                      {
  83   3                              case 0:
  84   3                                      digit_selc_show(i,speed.thousands);
  85   3                                      break;
  86   3                              case 1:
  87   3                                      digit_selc_show(i,speed.hundreds);
  88   3                                      break;
  89   3                              case 2:
  90   3                                      digit_selc_show(i,speed.tens);
  91   3                                      break;
  92   3                              case 3:
  93   3                                      digit_selc_show(i,speed.units);
  94   3                                      break;
  95   3                              default:
  96   3                              break;
  97   3                      }
  98   2              }
  99   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    211    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     18       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
