#include "FreeRTOS_test_funcs.h"
#include "main.h"
#include "tim.h"
#include "FreeRTOS.h"
#include "WS2811.h"
void LED_Test(void)
{
	while(1)
	{
		static char state = 0;
		state  = ~state;
//		HAL_GPIO_WritePin(LED_IND_GPIO_Port,LED_IND_Pin , state);
		osDelay(1000);
	}
}

void Win1_Test(void)
{

}

void Win2_Test(void)
{

}

void Win3_Test(void)
{

}

void Win4_Test(void)
{
	while(1)
	{
		static char state = 0;
		state  = ~state;
		if(state)
			__HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_2, 0);
		else
			__HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_2, 10);
//		osDelay(3000);
		vTaskDelay(3000);
//		vTaskSuspend(g_TCBofWinTask);
//		vTaskResume(); Recover to the state before suspend
	}
}

void WS2812_Test(void)
{
	char led_sta = 0;
	for(;;)
	{
		led_sta = WS_LED_State_Get();
		switch(led_sta)
		{
			case 1://USB DETECTED
			{
				WS_ColorSet_LED(0, LEDNUM, 0x00ff00);//Solid red
				WS_Refresh();
				break;
			}
			case 2://CHARGING
			{
				WS_ColorSet_LED(0, LEDNUM, Blue);
				WS_Refresh();
			}
			case 3: //Bat on
			{
				WS_Hue_change();
			}
			default://Outside power
			{
				WS_ColorSet_LED(0, LEDNUM, Blue);//Breathing RGB
				//WS_ColorSet_LED(0, LEDNUM, Blue);
				//WS_Refresh();
				break;
			}
		}
		vTaskDelay(1);
		//	  HAL_GPIO_WritePin(WS_LED_PORT,WS_LED_Pin , GPIO_PIN_SET);//this command takes 180ms, try register

		/*HAL_GPIO_WritePin(WS_LED_PORT,WS_LED_Pin , GPIO_PIN_SET);
		(&htim14)->Instance->CNT = 0;
		while ((&htim14)->Instance->CNT < 2);
		HAL_GPIO_WritePin(WS_LED_PORT,WS_LED_Pin , GPIO_PIN_RESET);*/
	}
}
